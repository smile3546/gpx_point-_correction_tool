GPX路線切分工具

這是一個專門處理登山路線GPX軌跡的工具，可以將路線按通訊點切分成多段，並整合通訊點資料。

主要功能

前端網頁界面
互動式地圖顯示完整路線和所有點位
支援路線A和路線B的切換顯示
可以查看編輯和管理點位資料
提供點位表格檢視和排序功能
支援下載修改後的檔案

路線處理工具
自動解析GPX軌跡檔案
整合通訊點資料到路線中
確保通訊點在路徑上而非只是地圖標記
自動進行時間和高度插值計算
根據最後通訊點分割成路線A和路線B

路線切分工具
依據data_raw中的通訊點檔案進行路線切分
按照通訊點順序將路線切分為多段
每段包含起始通訊點到結束通訊點之間的所有點位
自動建立分類資料夾結構
分別匯出TXT和GeoJSON格式檔案

檔案結構

data_raw 原始資料
gpx資料夾存放原始GPX軌跡檔案
txt資料夾存放通訊點座標檔案

data_work 處理後資料
route_a資料夾存放路線A的完整資料
route_b資料夾存放路線B的完整資料
每個路線包含points.txt和route.geojson

路線切分 切分後資料
route_a和route_b分別包含txt和geojson子資料夾
每個路線名稱會自動建立專屬資料夾
按段落編號命名的切分檔案

frontend 網頁介面
index.html主要網頁檔案
main.js前端互動邏輯
style.css網頁樣式設定

scripts 處理程式
pt_process.py主要路線處理程式
route_splitter.py路線切分程式
utils.py共用工具函數
update_route_api.py路線更新API

使用流程

準備資料
將GPX軌跡檔案放入data_raw/gpx資料夾
將對應的通訊點TXT檔案放入data_raw/txt資料夾
確保檔案名稱一致例如北大武山.gpx和北大武山.txt

處理路線
執行pt_process.py處理原始資料
程式會自動整合通訊點到路線中
生成包含所有點位的完整路線資料
分割成路線A和路線B

切分路線
執行route_splitter.py進行路線切分
程式會讀取data_raw中的通訊點資料
按照通訊點順序切分路線為多段
自動建立分類資料夾並匯出檔案

檢視結果
開啟frontend/index.html使用網頁界面
查看完整路線和切分後的段落
可以編輯點位資料或下載檔案

檔案格式說明

輸入格式
GPX檔案包含軌跡點的時間座標和高度資訊
TXT檔案制表符分隔包含通訊點的座標和名稱

輸出格式
GeoJSON標準地理資料格式包含路線幾何和點位屬性
TXT制表符分隔的點位清單包含完整的點位資訊
切分檔案按段落命名例如北大武山_切分好的_route_a_part1_points.txt

技術規格

開發語言Python和JavaScript
地圖顯示Leaflet地圖庫
資料處理GeoPandas和Pandas
座標系統WGS84經緯度座標
檔案編碼UTF-8確保中文正確顯示

重要注意事項

檔案命名GPX和TXT檔案必須使用相同的檔案名稱
資料格式通訊點TXT檔案必須符合指定的欄位格式
處理時間大型軌跡檔案處理時間較長請耐心等待
資料備份建議在處理前先備份原始資料檔案
路徑整合所有通訊點都會整合到路徑中而非只是地圖標記
